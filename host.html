
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Host - Serata Giochi</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.socket.io/4.3.2/socket.io.min.js"></script>
</head>
<body>
  <div class="container">
    <h1>ðŸŽ‰ Serata Giochi - Host</h1>
    <div id="scelta-gioco">
      <button onclick="creaStanza('quiz1')">Quiz 1</button>
      <button onclick="creaStanza('quiz2')">Quiz 2</button>
      <button onclick="creaStanza('hangman')">Hangman</button>
    </div>
    <div id="qrcode-container" class="hidden">
      <canvas id="qrcode"></canvas>
      <p id="codice-stanza" class="codice-stanza"></p>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
  <script>
    const socket = io();

    function creaStanza(quiz) {
      fetch(`/crea-stanza?quiz=${quiz}`)
        .then(r => r.json())
        .then(data => {
          const room = data.room;
          socket.emit('join-host', room);
          document.getElementById('scelta-gioco').style.display = 'none';
          document.getElementById('qrcode-container').classList.remove('hidden');
          QRCode.toCanvas(document.getElementById('qrcode'), window.location.origin + '/player.html?room=' + room, function (error) {
            if (error) console.error(error);
          });
          document.getElementById('codice-stanza').textContent = room;
        });
    }

    fetch('config.json')
      .then(r => r.json())
      .then(cfg => {
        if (cfg.sfondo) {
          document.body.style.backgroundImage = `url('${cfg.sfondo}')`;
        }
      });
  </script>
</body>
</html>
